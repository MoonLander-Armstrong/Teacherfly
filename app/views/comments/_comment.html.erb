<article data-controller="comments">
  <div class="md:flex">
    <div class="flex-shrink-0 w-12 h-12 mb-4 md:w-20 md:h-20 rounded-full overflow-hidden">
      <%= image_tag current_user.avatar, class: "w-full h-full object-cover" if current_user.avatar.attached? %>
    </div>
    <div class="comment-triangle relative flex-grow p-4 md:ml-4 bg-gray-100 rounded">
      <div class="flex justify-between items-center mb-4 text-primary-300">
        <h3><%= current_user.username %></h3>
        <button class="text-xl p-1" data-action="click->comments#toggle"><i class="fa-solid fa-comment-dots"></i></button>
      </div>
      <p class="p-4"><%= comment.content %></p>
      <div class="comment hidden pt-4 border-t border-gray-300" data-comments-target="commentForm">  
      <%= render partial: "comments/form", locals: { course: @course, section: @section, parent: comment }%>
    </div>
    </div>
  </div>
  
  <div class="comment" id="comment_<%= comment.id %>">
    <%= render comment.comments.order(id: :desc) %>
  </div>
</article>

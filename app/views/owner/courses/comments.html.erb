<%= content_for :course do %>
  <ul class="sidebar-list">
    <li>
      <%= link_to information_owner_course_path(@course) do %>
        <i class="fa-solid fa-chalkboard-user"></i>Information
      <% end %>
    </li>
    <li>
      <%= link_to curriculum_owner_course_path(@course) do %>
        <i class="fa-solid fa-chalkboard-user"></i>Curriculum
      <% end %>
    </li>
    <li>
      <%= link_to comments_owner_course_path(@course) do %>
        <i class="fa-solid fa-chalkboard-user"></i>Comments
      <% end %>
    </li>
  </ul>
<% end %>

<div class="w-full h-full px-4 m-auto bg-gradient-to-tl">
  <nav class="flex items-center justify-between w-full h-16 border-b-2">
    <h1 class="inline-block m-4 text-2xl text-blue-900">全部課程</h1> 
  </nav>		
	<%= render "shared/flash" %>	
	<table class="mt-10 owner-table">
		<thead class="owner-thead">
			<tr>
				<th class="text-left owner-text">留言</th>
				<th class="text-left owner-text">留言者</th>
				<th class="text-center owner-text">小節名稱</th>
				<th class="text-center owner-text">其他</th>
			</tr>
		</thead>
		<tbody class="owner-tbody">
			<% Comment.includes(:section, :user).order(id: :desc).all.each do |comment| %>
				<tr class="border-b border-gray-200 hover:bg-gray-100">
					<td class="text-left owner-text whitespace-nowrap">
						<div class="flex items-center">
							<div class="mr-2">
								<span class="text-lg font-medium text-blue-600"><%= comment.content %></span>
							</div>
						</div>
					</td>
					<td class="px-6 py-3 text-left">
						<div class="flex items-center">
							<span><%= comment.user.username %></span>
						</div>
					</td>
					<td class="px-6 py-3 text-center">
						<div class="flex items-center justify-center">
							<span><%= comment.section.title %></span>
						</div>
					</td>
					<td class="px-6 py-3 text-center">
						<div class="flex justify-center item-center">
							<div class="w-10 mr-2 transform " data-controller="nested">
								  <button class="text-blue-700 " data-action="click->nested#appear" data-nested-target="action">回覆</button>
									<div class="comment-form " data-nested-target="comments">  
										<%= form_with(url: owner_course_section_comments_path(@course, comment.section), scope: "comment") do |form|%>
											<input type="hidden" name=comment[parent_id] value="<%= comment.id %>">
											<%= form.text_area :content, class:"" %>
											<%= form.submit "送出" %>
											<% end %>	
									</div>
							</div>
						</div>
					</td>
				</tr>
			<% end %>
		</tbody>
	</table>
</div>







